<Device>:
    orientation: 'vertical'
    spacing: dp(0)
    size_hint: (0.08, None)
    drag_rectangle: (self.x, self.y, self.width, self.get_height())
    drag_distance: dp(5)
    drag_timeout: 500
    DeviceButton:
        pos_hint: {"center_x": 0.5}
        _on_release: root.on_release
    DeviceLabel:
        text: root.hostname
        pos_hint: {"center_x": 0.5}
        size: self.texture_size

<CommandsPopup>:
    size_hint_x: 0.4

<EditDevicePopup>:
    size_hint: (0.9, 0.75)
    root: root
    ThemedBoxLayout:
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos: self.pos
                size: self.size
        spacing: dp(20)
        ThemedBoxLayout:  # left 1/3
            id: left_panel
            size_hint_x: 0.3
            orientation: "vertical"
            SingleRowLayout:
                size_hint_y: 0.16
                #size_hint_max_y: app.BUTTON_MAX_H + dp(8)
                CheckBoxLabel:  # Hostname
                    text: _("Hostname")
                ValueInput:  # device.hostname
                    text: root.device.hostname
            #PopupButton:  # Gateway
            #    text: _("Gateway")
            #    on_release: root.on_gateway()
            SingleRowLayout:
                size_hint_y: 0.16
                #size_hint_max_y: app.BUTTON_MAX_H + dp(8)
                CheckBoxLabel:  # Gateway
                    text: _("Gateway")
                ValueInput:  # device.gateway
                    id: gateway
                    text: root.device.gateway
                    on_focus: root.on_gateway()
            PopupButton:  # Routes
                text: _("Routes")
                on_release: root.on_routes()
        ThemedBoxLayout:  # center 1/3
            size_hint_x: 0.3
            orientation: "vertical"
            SingleRowLayout:  # NICs label/button
                size_hint_y: 0.15
                CheckBoxLabel:  # NICs
                    size_hint_x: 0.45
                    text: _("NICs")
                PopupButton:  # Edit
                    id: edit_nic
                    size_hint_x: 0.55
                    text: _("Edit")
                    disabled: True
                    on_release: root.on_nics_edit()
            NICsRecView:
                size_hint_y: 0.35
                root: root
                on_parent: self.update_data(root.device.nics, management=True)
            SingleRowLayout:  # IPs label/buttons
                size_hint_y: 0.15
                CheckBoxLabel:  # IPs
                    size_hint_x: 0.15
                    text: _("IPs")
                PopupButton:  # +
                    id: add_ip
                    size_hint_x: 0.15
                    text: "+"
                    disabled: True
                    on_release: root.on_ips_add()
                PopupButton:  # -
                    id: remove_ip
                    size_hint_x: 0.15
                    text: "-"
                    disabled: True
                    on_release: root.on_ips_remove()
                PopupButton:  # Edit
                    id: edit_ip
                    size_hint_x: 0.55
                    text: _("Edit")
                    disabled: True
                    on_release: root.on_ips_edit()
            IPsRecView:  # IP addresses data
                id: ips_list
                size_hint_y: 0.35
                root: root
        ThemedBoxLayout:
            size_hint_x: 0.4
            orientation: "vertical"
            TextInput:  # ARP table
                text: "XXXXXXXX"
            ActionPopupButtons:
                on_cancel: root.on_cancel()
                on_okay: root.on_okay()


<PingHostPopup>:
    size_hint: (0.5, 0.4)
    ThemedBoxLayout:
        orientation: 'vertical'
        ValueInput:
            id: host
            hint_text: _("hostname or IP")
            on_text_validate: root.on_okay(root.ids.host.text)
        Widget:
        ActionPopupButtons:
            on_cancel: root.on_cancel()
            on_okay: root.on_okay(root.ids.host.text)


<EditDhcpPopup>:
    title: _("Edit DHCP configuration")
    ThemedBoxLayout:
        orientation: "vertical"
        SingleRowLayout:
            size_hint_y: 0.2
            CheckBoxLabel:
                text: _("IP Address")
            CheckBoxLabel:
                text: _("Range Start")
            CheckBoxLabel:
                text: _("Range End")
        ThemedBoxLayout:
            padding: (dp(0), dp(0), dp(0), dp(0))
            size_hint_y: 0.2
            id: dhcp_configs_layout
            orientation: "vertical"
        Widget:
        ActionPopupButtons:
            on_cancel: root.on_cancel()
            on_okay: root.on_okay()


<EditIpPopup>:
    size_hint_x: 0.5
    title: _("Edit IP configuration")
    ThemedBoxLayout:
        orientation: "vertical"
        SingleRowLayout:
            CheckBoxLabel:
                text: _("IP Address:")
            ValueInput:
                text: root.ip_address.address
                on_focus: root.set_address(self)
        SingleRowLayout:
            CheckBoxLabel:
                text: _("Netmask:")
            ValueInput:
                text: root.ip_address.netmask
                on_focus: root.set_netmask(self)
        SingleRowLayout:
            CheckBoxLabel:
                text: _("Gateway:")
            ValueInput:
                text: root.ip_address.gateway
                on_focus: root.set_gateway(self)
                disabled: True
        Widget:
        ActionPopupButtons:
            on_cancel: root.on_cancel()
            on_okay: root.on_okay()


<ChooseNicPopup>:
    size_hint_x: 0.5
    title: f"{self.device.hostname} | {_('Choose NIC')}"
    ThemedBoxLayout:
        orientation: "vertical"
        NICsRecView:
            size_hint_y: 0.8
            root: root
            id: nics_list
        ActionPopupButtons:
            size_hint_y: 0.2
            on_cancel: root.on_cancel()
            on_okay: root.on_okay()
